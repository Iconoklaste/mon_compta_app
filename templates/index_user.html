{% extends 'base.html' %}

{# --- MODIFICATION : Les styles sont dans styles.css --- #}
{% block extra_head %}
{% endblock %}

{# --- MODIFICATION : Laisser les blocs navbar vides pour cette page --- #}
{% block page_title %}{% endblock %}
{% block page_subtitle %}{% endblock %}
{% block navbar_actions %}{% endblock %}


{# --- Contenu principal de la page --- #}
{% block content %}
{# --- MODIFICATION : Structure Flex pour Avatar + Contenu Conversationnel --- #}
<div class="d-flex align-items-start mt-4 pt-3"> {# mt-4 pt-3 pour espace sous la navbar (même vide) et un peu d'air #}

    {# --- Colonne Avatar (Gauche) --- #}
    <div class="user-welcome-avatar-container me-3 fade-in-item" style="animation-delay: 0.1s;">
        {# S'assurer que user-welcome-avatar-container et user-welcome-avatar sont définis dans styles.css #}
        <img src="{{ url_for('static', filename='asset/avatar-loova.png') }}" alt="Avatar Loova" class="user-welcome-avatar">
    </div>

    {# --- Colonne Contenu Conversationnel (Droite) --- #}
    <div class="conversation-content flex-grow-1"> {# flex-grow-1 prend l'espace restant #}

        {# Message de bienvenue (semble venir de Loova) #}
        <h1 class="fade-in-item mb-3" style="animation-delay: 0.3s;">
            Bienvenu {{ user_prenom | default('Utilisateur') }} !
        </h1>

        {# Prompt / Question (semble venir de Loova) #}
        <h6 class="text-muted fade-in-item mb-4" style="animation-delay: 0.5s;">
            Que souhaitez-vous faire aujourd'hui ?
        </h6>

        {# Suggestions / Actions (présentées comme des options par Loova) #}
        <div class="row"> {# Utilisation de row/col pour la mise en page responsive des cartes #}
            <div class="col-md-6 mb-4">
                <article class="card h-100 fade-in-item" style="animation-delay: 0.7s;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Piloter vos projets</h5>
                        <p class="text-body-secondary small">Suivi précis, outils collaboratifs et équipe synchronisée.</p>
                        <a href="{{ url_for('projets.projets') }}" class="btn btn-primary stretched-link mt-auto">
                            <i class="fas fa-tasks me-2"></i>Mes projets
                        </a>
                    </div>
                </article>
            </div>
            <div class="col-md-6 mb-4">
                 <article class="card h-100 fade-in-item" style="animation-delay: 0.9s;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Gérer votre comptabilité</h5>
                        <p class="text-body-secondary small">Indicateurs clés, facturation et suivi financier simplifié.</p>
                        <a href="{{ url_for('compta.index') }}" class="btn btn-primary stretched-link mt-auto">
                             <i class="fas fa-money-bill-wave me-2"></i>Ma Comptabilité
                         </a>
                    </div>
                </article>
            </div>
        </div>

        {# --- Section Chatbot (pour continuer la "conversation") --- #}
        <div class="chatbot-section mt-4 pt-4 border-top fade-in-item" style="animation-delay: 1.1s;">
             {# On peut ajouter une petite phrase d'intro ici aussi si on veut #}
             <p class="text-muted small mb-2">Ou posez-moi directement votre question :</p>
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Ex: Comment créer une facture ?" aria-label="Question pour le chatbot">
                <button class="btn btn-outline-secondary" type="button" id="button-chatbot-submit"><i class="fas fa-paper-plane"></i></button>
            </div>
            {# <small class="form-text text-muted mt-2 d-block">Exemple : "Comment créer une facture ?" ou "Montre-moi le solde du client X"</small> #}
        </div>

    </div> {# --- Fin Colonne Contenu Conversationnel --- #}

</div> {# --- Fin Structure Flex --- #}
{% endblock %}


{# Le bloc extra_scripts reste utile pour la logique JS spécifique (ex: chatbot) #}
{% block extra_scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatbotButton = document.getElementById('button-chatbot-submit');
            if (chatbotButton) {
                chatbotButton.addEventListener('click', function() {
                    // Logique pour envoyer la question du chatbot
                    const questionInput = chatbotButton.previousElementSibling; // Prend l'input juste avant
                    console.log('Question pour le chatbot:', questionInput.value);
                    // Ajouter ici l'appel AJAX ou autre pour traiter la question
                    questionInput.value = ''; // Vider l'input après envoi (optionnel)
                });
            }
            // Ajouter un listener pour la touche Entrée sur l'input
             const questionInput = document.querySelector('.chatbot-section input[type="text"]');
             if(questionInput && chatbotButton) {
                 questionInput.addEventListener('keypress', function(event) {
                     if (event.key === 'Enter') {
                         event.preventDefault(); // Empêche le rechargement/soumission de formulaire par défaut
                         chatbotButton.click(); // Déclenche le clic sur le bouton d'envoi
                     }
                 });
             }
        });
    </script>
{% endblock %}